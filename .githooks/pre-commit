#!/usr/bin/env bash

# ğŸš€ Quantum Git Hook - Pre-commit Environment Sync
# Automatically syncs environment variables to Netlify before commit

echo "ğŸŒŸ Executing quantum pre-commit hook..."

# Check if .env has changed
if git diff --cached --name-only | grep -q "\.env$"; then
    echo "ğŸ”§ .env file changed, syncing to Netlify..."
    
    # Run the sync script
    node scripts/sync-env-to-netlify.js
    
    if [ $? -eq 0 ]; then
        echo "âœ… Environment sync successful!"
    else
        echo "âŒ Environment sync failed - commit blocked"
        exit 1
    fi
else
    echo "ğŸ“‹ No .env changes detected, skipping sync"
fi

echo "ğŸ‰ Pre-commit hook completed successfully!"
